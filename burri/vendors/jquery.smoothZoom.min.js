(function(e,f,i){var c={width:"",height:"",initial_ZOOM:"",initial_POSITION:"",animation_SMOOTHNESS:5.5,animation_SPEED_ZOOM:5.5,animation_SPEED_PAN:5.5,zoom_MAX:800,zoom_MIN:"",zoom_SINGLE_STEP:false,zoom_OUT_TO_FIT:true,zoom_BUTTONS_SHOW:true,pan_BUTTONS_SHOW:true,pan_LIMIT_BOUNDARY:true,pan_REVERSE:false,reset_ALIGN_TO:"center center",reset_TO_ZOOM_MIN:true,button_SIZE:18,button_SIZE_TOUCH_DEVICE:30,button_COLOR:"#FFFFFF",button_BG_COLOR:"#000000",button_BG_TRANSPARENCY:55,button_AUTO_HIDE:false,button_AUTO_HIDE_DELAY:1,button_ALIGN:"bottom right",button_MARGIN:10,button_ROUND_CORNERS:true,touch_DRAG:true,mouse_DRAG:true,mouse_WHEEL:true,mouse_WHEEL_CURSOR_POS:true,mouse_DOUBLE_CLICK:true,background_COLOR:"#FFFFFF",border_SIZE:1,border_COLOR:"#000000",border_TRANSPARENCY:10,image_url:"",image_original_width:"",image_original_height:"",container:"",on_IMAGE_LOAD:"",on_ZOOM_PAN_UPDATE:"",on_ZOOM_PAN_COMPLETE:"",on_LANDMARK_STATE_CHANGE:"",use_3D_Transform:true,responsive:false,responsive_maintain_ratio:true,max_WIDTH:"",max_HEIGHT:""};function h(m,o){var l=this,q=e.extend({},c,o);this.$elem=m;this.hasTouch=this.checkTouchSupport();this.sW=q.width;this.sH=q.height;this.init_zoom=q.initial_ZOOM/100;this.init_pos=q.initial_POSITION.replace(/,/g," ").replace(/\s{2,}/g," ").split(" ");this.zoom_max=q.zoom_MAX/100;this.zoom_min=q.zoom_MIN/100;this.zoom_single=a(q.zoom_SINGLE_STEP);this.zoom_fit=a(q.zoom_OUT_TO_FIT);this.zoom_speed=1+(((q.animation_SPEED===0||q.animation_SPEED?q.animation_SPEED:q.animation_SPEED_ZOOM)+1)/20);this.zoom_show=a(q.zoom_BUTTONS_SHOW);this.pan_speed_o=(q.animation_SPEED===0||q.animation_SPEED?q.animation_SPEED:q.animation_SPEED_PAN);this.pan_show=a(q.pan_BUTTONS_SHOW);this.pan_limit=a(q.pan_LIMIT_BOUNDARY);this.pan_rev=a(q.pan_REVERSE);this.reset_align=q.reset_ALIGN_TO.toLowerCase().split(" ");this.reset_to_zmin=a(q.reset_TO_ZOOM_MIN);this.bu_size=parseInt((this.hasTouch?q.button_SIZE_TOUCH_DEVICE:q.button_SIZE)/2)*2;this.bu_color=q.button_COLOR;this.bu_bg=q.button_BG_COLOR;this.bu_bg_alpha=q.button_BG_TRANSPARENCY/100;this.bu_icon=q.button_ICON_IMAGE;this.bu_auto=a(q.button_AUTO_HIDE);this.bu_delay=q.button_AUTO_HIDE_DELAY*1000;this.bu_align=q.button_ALIGN.toLowerCase().split(" ");this.bu_margin=q.button_MARGIN;this.bu_round=a(q.button_ROUND_CORNERS);this.touch_drag=a(q.touch_DRAG);this.mouse_drag=a(q.mouse_DRAG);this.mouse_wheel=a(q.mouse_WHEEL);this.mouse_wheel_cur=a(q.mouse_WHEEL_CURSOR_POS);this.mouse_dbl_click=a(q.mouse_DOUBLE_CLICK);this.ani_smooth=Math.max(1,(q.animation_SMOOTHNESS+1)/1.45);this.bg_color=q.background_COLOR;this.bord_size=q.border_SIZE;this.bord_color=q.border_COLOR;this.bord_alpha=q.border_TRANSPARENCY/100;this.container=q.container;this.image_url=q.image_url;this.image_width=q.image_original_width;this.image_height=q.image_original_height;this.responsive=a(q.responsive);this.maintain_ratio=a(q.responsive_maintain_ratio);this.w_max=q.max_WIDTH;this.h_max=q.max_HEIGHT;this.onLOAD=q.on_IMAGE_LOAD;this.onUPDATE=q.on_ZOOM_PAN_UPDATE;this.onZOOM_PAN=q.on_ZOOM_PAN_COMPLETE;this.onLANDMARK=q.on_LANDMARK_STATE_CHANGE;this._x;this._y;this._w;this._h;this._sc=0;this.rA=1;this.rF=1;this.rR=1;this.iW=0;this.iH=0;this.tX=0;this.tY=0;this.oX=0;this.oY=0;this.fX=0;this.fY=0;this.dX=0;this.dY=0;this.cX=0;this.cY=0;this.transOffX=0;this.transOffY=0;this.focusOffX=0;this.focusOffY=0;this.offX=0;this.offY=0;this._playing=false;this._dragging=false;this._onfocus=false;this._moveCursor=false;this._wheel=false;this._recent="zoomOut";this._pinching=false;this._landmark=false;this._rA;this._centx;this._centy;this._onButton=false;this._onHitArea=false;this.cFlag={_zi:false,_zo:false,_ml:false,_mr:false,_mu:false,_md:false,_rs:false,_nd:false};this.$holder;this.$hitArea;this.$controls;this.$loc_cont;this.map_coordinates=[];this.locations=[];this.buttons=[];this.border=[];this.buttons_total=7;this.cButtId=0;this.pan_speed;this.auto_timer;this.ani_timer;this.ani_end;this.focusSpeed=this.reduction=0.5;this.orig_style;this.mapAreas;this.icons;this.show_at_zoom;this.assetsLoaded=false;this.zStep=0;this.sRed=300;this.use3D=q.use_3D_Transform&&b;if(navigator.pointerEnabled||navigator.msPointerEnabled){if(navigator.pointerEnabled){this.pointerDown="pointerdown";this.pointerUp="pointerup";this.pointerMove="pointermove"}else{if(navigator.msPointerEnabled){this.pointerDown="MSPointerDown";this.pointerUp="MSPointerUp";this.pointerMove="MSPointerMove"}}this.event_down=this.pointerDown+".sz";this.event_up=this.pointerUp+".sz";this.event_move=this.pointerMove+".sz";this.supportsPointer=true;this.pointers=[]}else{if(this.hasTouch){this.event_down="touchstart.sz";this.event_up="touchend.sz";this.event_move="touchmove.sz"}else{this.event_down="mousedown.sz";this.event_up="mouseup.sz";this.event_move="mousemove.sz"}}if(this.image_url==""){this.$image=m;this.id=this.$image.attr("id")}else{var k=new Image();if(this.image_width){k.width=this.image_width}if(this.image_height){k.height=this.image_height}k.src=this.image_url;this.$image=e(k).appendTo(m)}this.setContainer();var n;if(!this.bu_icon){var p=/url\(["']?([^'")]+)['"]?\)/;n=e('<div class="smooth_zoom_icons"></div>');this.$holder.append(n);this.bu_icon=n.css("background-image").replace(p,"$1");if(this.bu_icon=="none"){this.bu_icon="/burri/uploads/zoom_assets/icons.png"}n.remove()}if(this.$image.css("-moz-transform")&&d){n=e('<div style="-moz-transform: translate(1px, 1px)"></div>');this.$holder.append(n);this.fixMoz=n.position().left===1?false:true;n.remove()}else{this.fixMoz=false}this.$image.hide();this.imgList=[{loaded:false,src:this.bu_icon||"/burri/uploads/zoom_assets/icons.png"},{loaded:false,src:this.image_url==""?this.$image.attr("src"):this.image_url}];e.each(this.imgList,function(s){var r=new Image();e(r).bind("load",{id:s,self:l},l.loadComplete).bind("error",{id:s,self:l},l.loadComplete);r.src=l.imgList[s].src})}h.prototype={loadComplete:function(n){var l=n.data.self,k=true;l.imgList[n.data.id].loaded=true;for(var m=0;m<l.imgList.length;m++){if(!l.imgList[m].loaded){k=false}}if(k){l.assetsLoaded=true;if(l.onLOAD!==""){l.onLOAD()}l.init()}},checkTouchSupport:function(){var k="ontouchstart" in f||"createTouch" in i;if(navigator.pointerEnabled){k=Boolean(k||navigator.maxTouchPoints)}else{if(navigator.msPointerEnabled){k=Boolean(k||navigator.msMaxTouchPoints)}}return k},init:function(){var m=this,F=m.$image,B=m.sW,H=m.sH,D=m.container,k,o,w=m.pan_show,P=m.zoom_show,O=m.$controls,A=m.buttons,t=m.cFlag,L=m.bu_align,r=m.bu_margin,W=m.$holder;m.orig_style=m.getStyle();F.attr("galleryimg","no");if(!navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)){F.removeAttr("width");F.removeAttr("height")}var l=F,K=[];for(var R=0;R<5;R++){if(l&&l[0].tagName!=="BODY"&&l[0].tagName!=="HTML"){if(l.css("display")=="none"){l.css("display","block");K.push(l)}l=l.parent()}else{break}}m.iW=F.width();m.iH=F.height();for(var R=0;R<K.length;R++){K[R].css("display","none")}m.rF=m.rR=m.checkRatio(B,H,m.iW,m.iH,m.zoom_fit);if(m.zoom_min==0||m.init_zoom!=0){if(m.init_zoom!=""){m.rA=m._sc=m.init_zoom}else{m.rA=m._sc=m.rF}if(m.zoom_min!=0){m.rF=m.zoom_min;if(m.reset_to_zmin){m.rR=m.zoom_min}}}else{if(m.rF<m.zoom_min){m.rF=m.zoom_min;if(m.reset_to_zmin){m.rR=m.zoom_min}m.rA=m._sc=m.zoom_min}else{m.rA=m._sc=m.rR}}m._w=m._sc*m.iW;m._h=m._sc*m.iH;if(m.init_pos==""){m._x=m.tX=(B-m._w)/2;m._y=m.tY=(H-m._h)/2}else{m._x=m.tX=(B/2)-parseInt(m.init_pos[0])*m._sc;m._y=m.tY=(H/2)-parseInt(m.init_pos[1])*m._sc;m.oX=(m.tX-((B-m._w)/2))/(m._w/B);m.oY=(m.tY-((H-m._h)/2))/(m._h/H)}if((!m.pan_limit||m._moveCursor||m.init_zoom!=m.rF)&&m.mouse_drag){F.css("cursor","move");m.$hitArea.css("cursor","move")}if(d){m.$image.css(j,"0 0")}if(m.use3D){F.css({"-webkit-backface-visibility":"hidden","-webkit-perspective":1000})}F.css({position:"absolute","z-index":2,left:"0px",top:"0px","-webkit-box-shadow":"1px 1px rgba(0,0,0,0)"}).hide().fadeIn(500,function(){W.css("background-image","none")});var m=m,J=m.bu_size,q=50,T=2,p=3,n=Math.ceil(m.bu_size/4),C=J<16?50:0,x=J-T;if(w){if(P){k=parseInt(J+(J*0.85)+(x*3)+(p*2)+(n*2))}else{k=parseInt((x*3)+(p*2)+(n*2))}o=parseInt((x*3)+(p*2)+(n*2))}else{if(P){k=parseInt(J+n*2);o=parseInt(J*2+n*3);k=parseInt(k/2)*2;o=parseInt(o/2)*2}else{k=0;o=0}}var v=(q-J)/2,z=k-((J-(w?T:0))*2)-n-p,y=(o/2)-((J-(w?T:0))/2);var I,V,U,G;if(L[0]=="top"){V="top";G=r}else{if(L[0]=="center"){V="top";G=parseInt((H-o)/2)}else{V="bottom";G=r}}if(L[1]=="right"){I="right";U=r}else{if(L[1]=="center"){I="right";U=parseInt((B-k)/2)}else{I="left";U=r}}O=e('<div style="position: absolute; '+I+":"+U+"px; "+V+": "+G+"px; width: "+k+"px; height: "+o+'px; z-index: 20;" class="noSel">					<div class="noSel controlsBg" style="position: relative; width: 100%; height: 100%; z-index: 1;">					</div>				</div>');W.append(O);var s=O.find(".controlsBg");if(m.bu_round){if(g){s.css(g,(C>0?4:5)+"px").css("background-color",m.bu_bg)}else{m.roundBG(s,"cBg",k,o,C>0?4:5,375,m.bu_bg,m.bu_icon,1,C?50:0)}}else{s.css("background-color",m.bu_bg)}s.css("opacity",m.bu_bg_alpha);A[0]={_var:"_zi",l:n-9,t:w?(o-(J*2)-(p*2)+2)/2:n,w:J,h:J,bx:-v,by:-v-C};A[1]={_var:"_zo",l:n*6,t:w?(o-(J*2)-(p*2)+2)/2:n,w:J,h:J,bx:-q-v,by:-v-C};A[2]={_var:m.pan_rev?"_ml":"_mr",l:z-x-p,t:y,w:x,h:x,bx:-(T/2)-q*2-v,by:-(T/2)-v-C};A[3]={_var:m.pan_rev?"_mr":"_ml",l:z+x+p,t:y,w:x,h:x,bx:-(T/2)-q*3-v,by:-(T/2)-v-C};A[4]={_var:m.pan_rev?"_md":"_mu",l:z,t:y+x+p,w:x,h:x,bx:-(T/2)-q*4-v,by:-(T/2)-v-C};A[5]={_var:m.pan_rev?"_mu":"_md",l:z,t:y-x-p,w:x,h:x,bx:-(T/2)-q*5-v,by:-(T/2)-v-C};A[6]={_var:"_rs",l:z,t:y,w:x,h:x,bx:-(T/2)-q*6-v,by:-(T/2)-v-C};for(var R=0;R<7;R++){A[R].$ob=e('<div style="position: absolute; display: '+(R<2?P?"block":"none":w?"block":"none")+"; left: "+(A[R].l-1)+"px; top: "+(A[R].t-1)+"px; width: "+(A[R].w+2)+"px; height: "+(A[R].h+2)+"px; z-index:"+(R+1)+';" class="noSel">						</div>').css("opacity",0.7).bind("mouseover.sz mouseout.sz "+m.event_down,{id:R},function(Y){m._onfocus=false;var X=e(this);if(Y.type=="mouseover"){if(X.css("opacity")>0.5){X.css("opacity",1)}}else{if(Y.type=="mouseout"){if(X.css("opacity")>0.5){X.css("opacity",0.7)}}else{if(Y.type=="mousedown"||Y.type=="touchstart"||Y.type==m.pointerDown){m.cButtId=Y.data.id;m._onButton=true;m._wheel=false;if(X.css("opacity")>0.5){X.css("opacity",1);W.find("#"+A[m.cButtId]._var+"norm").hide();W.find("#"+A[m.cButtId]._var+"over").show();if(m.cButtId<=1&&m.zoom_single){if(!t[A[m.cButtId]._var]){m.sRed=300;t[A[m.cButtId]._var]=true}}else{if(m.cButtId<6){t[A[m.cButtId]._var]=true}else{t._rs=true;m.rA=m.rR;if(m.reset_align[0]=="top"){m.fY=(m.sH/2)*(m.rA/2)}else{if(m.reset_align[0]=="bottom"){m.fY=-(m.sH/2)*(m.rA/2)}else{m.fY=0}}if(m.reset_align[1]=="left"){m.fX=(m.sW/2)*(m.rA/2)}else{if(m.reset_align[1]=="right"){m.fX=-(m.sW/2)*(m.rA/2)}else{m.fX=0}}}}m.focusOffX=m.focusOffY=0;m.changeOffset(true,true);if(!m._playing){m.Animate()}}Y.preventDefault();Y.stopPropagation()}}}});var M=e('<div id="'+A[R]._var+'norm" style="position: absolute; left: 1px; top: 1px; width: '+A[R].w+"px; height: "+A[R].h+"px; "+(g||!m.bu_round?"background:"+m.bu_color:"")+'">					</div>');var S=e('<div id="'+A[R]._var+'over" style="position: absolute; left: 0px; top: 0px; width: '+(A[R].w+2)+"px; height: "+(A[R].h+2)+"px; display: none; "+(g||!m.bu_round?"background:"+m.bu_color:"")+'">					</div>');var E=e('<div id="'+A[R]._var+'_icon" style="position: absolute; left: 1px; top: 1px; width: '+A[R].w+"px; height: "+A[R].h+"px; background: transparent url("+m.bu_icon+") "+A[R].bx+"px "+A[R].by+'px no-repeat;" >					</div>');A[R].$ob.append(M,S,E);O.append(A[R].$ob);if(m.bu_round){if(g){M.css(g,"2px");S.css(g,"2px")}else{m.roundBG(M,A[R]._var+"norm",A[R].w,A[R].h,2,425,m.bu_color,m.bu_icon,R+1,C?50:0);m.roundBG(S,A[R]._var+"over",A[R].w+2,A[R].h+2,2,425,m.bu_color,m.bu_icon,R+1,C?50:0)}}}e(i).bind(m.event_up+m.id,{self:m},m.mouseUp);if((m.mouse_drag&&!m.hasTouch)||(m.touch_drag&&m.hasTouch)){m.$holder.bind(m.event_down,{self:m},m.mouseDown);if(m.hasTouch){e(i).bind(m.event_move+m.id,{self:m},m.mouseDrag)}}if(m.mouse_dbl_click){var Q,N,u=1;m.$holder.bind("dblclick.sz",function(X){m.focusOffX=X.pageX-W.offset().left-(m.sW/2);m.focusOffY=X.pageY-W.offset().top-(m.sH/2);m.changeOffset(true,true);m._wheel=false;if(m.rA<m.zoom_max&&u==-1&&Q!=m.focusOffX&&N!=m.focusOffY){u=1}Q=m.focusOffX;N=m.focusOffY;if(m.rA>=m.zoom_max&&u==1){u=-1}if(m.rA<=m.rF&&u==-1){u=1}if(u>0){m.rA*=2;m.rA=m.rA>m.zoom_max?m.zoom_max:m.rA;t._zi=true;clearTimeout(m.ani_timer);m._playing=true;m.Animate();t._zi=false}else{m.rA/=2;m.rA=m.rA<m.rF?m.rF:m.rA;t._zo=true;clearTimeout(m.ani_timer);m._playing=true;m.Animate();t._zo=false}X.preventDefault();X.stopPropagation()})}if(m.mouse_wheel){W.bind("mousewheel.sz",{self:this},m.mouseWheel)}if(m.bu_auto){W.bind("mouseleave.sz",{self:this},m.autoHide)}O.bind(m.event_down,function(X){X.preventDefault();X.stopPropagation()});if(m.mouse_dbl_click){O.bind("dblclick.sz",function(X){X.preventDefault();X.stopPropagation()})}e(".noSel").each(function(){this.onselectstart=function(){return false}});m.$holder=W;m.$controls=O;m.sW=B;m.sH=H;m.cBW=k;m.cBH=o;m.Animate()},setContainer:function(){var k=this,n=k.$image,q=k.bord_size,m=k.border,p=k.$holder;if(k.container==""&&k.image_url==""){p=k.$image.wrap('<div class="noSel smooth_zoom_preloader">					</div>').parent()}else{if(k.image_url==""){p=e("#"+k.container)}else{p=k.$elem}p.addClass("noSel smooth_zoom_preloader");k.locations=[];k.$loc_cont=p.find(".landmarks");if(k.$loc_cont[0]){var o=k.$loc_cont.children(".item");k.loc_clone=k.$loc_cont.clone();k.show_at_zoom=parseInt(k.$loc_cont.data("show-at-zoom"),10)/100;k.allow_scale=a(k.$loc_cont.data("allow-scale"));k.allow_drag=a(k.$loc_cont.data("allow-drag"));o.each(function(){k.setLocation(e(this))})}}p.css({position:"relative",overflow:"hidden","text-align":"left","-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none","-webkit-touch-callout":"none","-ms-touch-action":"none","-webkit-tap-highlight-color":"rgba(255, 255, 255, 0)","background-color":k.bg_color,"background-position":"center center","background-repeat":"no-repeat"});k.$hitArea=e('<div style="position: absolute; z-index: 1; top: 0px; left: 0px; width: 100%; height: 100%;" ></div>').appendTo(p);k.getContainerSize(k.sW,k.sH,p,k.w_max,k.h_max);if(k.responsive){e(f).bind("orientationchange.sz"+k.id+" resize.sz"+k.id,{self:k},k.resize)}var r=k.sW;var l=k.sH;p.css({width:r,height:l});if(q>0){m[0]=e('<div style="position: absolute;	width: '+q+"px; height: "+l+"px;	top: 0px; left: 0px; z-index: 3; background-color: "+k.bord_color+';"></div>').css("opacity",k.bord_alpha);m[1]=e('<div style="position: absolute;	width: '+q+"px; height: "+l+"px;	top: 0px; left: "+(r-q)+"px; z-index: 4; background-color: "+k.bord_color+';"></div>').css("opacity",k.bord_alpha);m[2]=e('<div style="position: absolute;	width: '+(r-(q*2))+"px; height: "+q+"px; top: 0px; left: "+q+"px; z-index: 5; background-color: "+k.bord_color+'; line-height: 1px;"></div>').css("opacity",k.bord_alpha);m[3]=e('<div style="position: absolute;	width: '+(r-(q*2))+"px; height: "+q+"px; top: "+(l-q)+"px; left: "+q+"px; z-index: 6; background-color: "+k.bord_color+'; line-height: 1px;"></div>').css("opacity",k.bord_alpha);p.append(m[0],m[1],m[2],m[3])}if(n.attr("usemap")!=undefined){k.mapAreas=e("map[name='"+(n.attr("usemap").split("#").join(""))+"']").children("area");k.mapAreas.each(function(s){var t=e(this);t.css("cursor","pointer");if(k.mouse_drag){t.bind(k.event_down,{self:k},k.mouseDown)}if(k.mouse_wheel){t.bind("mousewheel.sz",{self:k},k.mouseWheel)}k.map_coordinates.push(t.attr("coords").split(","))})}k.$holder=p;k.sW=r;k.sH=l},getContainerSize:function(o,l,m,k,n){if(o===""||o===0){if(this.image_url==""){o=Math.max(m.parent().width(),100)}else{o=Math.max(m.width(),100)}}else{if(!isNaN(o)||String(o).indexOf("px")>-1){o=this.oW=parseInt(o);if(this.responsive){o=Math.min(m.parent().width(),o)}}else{if(String(o).indexOf("%")>-1){o=m.parent().width()*(o.split("%")[0]/100)}else{o=100}}}if(k!==0&&k!==""){o=Math.min(o,k)}if(l===""||l===0){if(this.image_url==""){l=Math.max(m.parent().height(),100)}else{l=Math.max(m.height(),100)}}else{if(!isNaN(l)||String(l).indexOf("px")>-1){l=this.oH=parseInt(l)}else{if(String(l).indexOf("%")>-1){l=m.parent().height()*(l.split("%")[0]/100)}else{l=100}}}if(n!==0&&n!==""){l=Math.min(l,n)}if(this.oW&&o!==this.oW){if(this.oH&&this.maintain_ratio){l=o/(this.oW/this.oH)}}this.sW=o;this.sH=l},setLocation:function(k){var v=this,l=k,p,r,t,s;if(j){l.css(j,"0 0")}l.css({display:"block","z-index":2});if(v.use3D){l.css({"-webkit-backface-visibility":"hidden","-webkit-perspective":1000})}p=l.outerWidth()/2;r=l.outerHeight()/2;t=l.data("position").split(",");s=l.data("allow-scale");if(s==undefined){s=v.allow_scale}else{s=a(s)}if(l.hasClass("mark")){var m=l.find("img").css("vertical-align","bottom").width();e(l.children()[0]).css({position:"absolute",left:(-l.width()/2),bottom:parseInt(l.css("padding-bottom"))*2});var o=l.find(".text");v.locations.push({ob:l,x:parseInt(t[0]),y:parseInt(t[1]),w2:p,h2:r,w2pad:p+(o[0]?parseInt(o.css("padding-left")):0),vis:false,lab:false,lpx:"0",lpy:"0",showAt:isNaN(l.data("show-at-zoom"))?v.show_at_zoom:parseInt(l.data("show-at-zoom"),10)/100,scale:s})}else{if(l.hasClass("lable")){var n=l.data("bg-color"),q=l.data("bg-opacity"),w=e(l.eq(0).children()[0]).css({position:"absolute","z-index":2,left:-p,top:-r});v.locations.push({ob:l,x:parseInt(t[0]),y:parseInt(t[1]),w2:p,h2:r,w2pad:p,vis:false,lab:true,lpx:"0",lpy:"0",showAt:isNaN(l.data("show-at-zoom"))?v.show_at_zoom:parseInt(l.data("show-at-zoom"),10)/100,scale:s});if(n!==""){if(!n){n="#000000";q=0.7}var u=e('<div style="position: absolute; left: '+(-p)+"px; top: "+(-r)+"px; width: "+((p-parseInt(w.css("padding-left")))*2)+"px; height:"+((r-parseInt(w.css("padding-top")))*2)+"px; background-color: "+n+';"></div>').appendTo(l);if(q){u.css("opacity",q)}}}}l.hide();if(d){l.css("opacity",0)}if(!v.allow_drag){l.bind(v.event_down,function(x){x.stopPropagation()})}},getStyle:function(){var k=this.$image;return{prop_origin:[j,j!==false&&j!==undefined?k.css(j):null],prop_transform:[d,d!==false&&d!==undefined?k.css(d):null],position:["position",k.css("position")],"z-index":["z-index",k.css("z-index")],cursor:["cursor",k.css("cursor")],left:["left",k.css("left")],top:["top",k.css("top")],width:["width",k.css("width")],height:["height",k.css("height")]}},checkRatio:function(p,m,k,o,n){var l;if(k==p&&o==m){l=1}else{if(k<p&&o<m){l=p/k;if(n){if(l*o>m){l=m/o}}else{if(l*o<m){l=m/o}if(p/k!==m/o&&this.mouse_drag){this._moveCursor=true;this.$image.css("cursor","move");this.$hitArea.css("cursor","move")}}}else{l=p/k;if(n){if(l*o>m){l=m/o}if(l<this.init_zoom&&this.mouse_drag){this._moveCursor=true;this.$image.css("cursor","move");this.$hitArea.css("cursor","move")}}else{if(l*o<m){l=m/o}if(p/k!==m/o&&this.mouse_drag){this._moveCursor=true;this.$image.css("cursor","move");this.$hitArea.css("cursor","move")}}}}return l},getDistance:function(l,n,k,m){return Math.sqrt(Math.abs(((k-l)*(k-l))+((m-n)*(m-n))))},mouseDown:function(o){var m=o.data.self,p=o.originalEvent,n,l,k;m._onfocus=m._dragging=false;if(m.cFlag._nd){m._onHitArea=true;m.samePointRelease=false;if(m.fixMoz){m.correctTransValue()}if(o.type==m.pointerDown){k=(p.MSPOINTER_TYPE_MOUSE&&p.pointerType===p.MSPOINTER_TYPE_MOUSE)||p.pointerType=="mouse";m.pointers.push({pageX:p.pageX,pageY:p.pageY,id:p.pointerId});l=m.pointers.length;n=m.pointers}if(o.type=="mousedown"||k){m.stX=p.pageX||o.pageX;m.stY=p.pageY||o.pageY;m.offX=m.stX-m.$holder.offset().left-m.$image.position().left;m.offY=m.stY-m.$holder.offset().top-m.$image.position().top;e(i).bind(m.event_move+m.id,{self:m},m.mouseDrag)}else{if(o.type=="touchstart"){l=p.targetTouches.length;n=p.touches}if(l>1){m._pinching=true;m._rA=m.rA;m.dStart=m.getDistance(n[0].pageX,n[0].pageY,n[1].pageX,n[1].pageY)}else{m.offX=n[l-1].pageX-m.$holder.offset().left-m.$image.position().left;m.offY=n[l-1].pageY-m.$holder.offset().top-m.$image.position().top;m.setDraggedPos(n[l-1].pageX-m.$holder.offset().left-m.offX,n[l-1].pageY-m.$holder.offset().top-m.offY,m._sc);m._recent="drag";m._dragging=true}}}if(o.type=="mousedown"||o.type==m.pointerDown){o.preventDefault()}},mouseDrag:function(o){var l=o.data.self,p=o.originalEvent,n,k;if(o.type=="mousemove"){l.setDraggedPos(o.pageX-l.$holder.offset().left-l.offX,o.pageY-l.$holder.offset().top-l.offY,l._sc);l._recent="drag";l._dragging=true;if(!l._playing){l.Animate()}return false}else{if(l._dragging||l._pinching){o.preventDefault()}if(l._onHitArea){if(o.type==l.pointerMove){for(var m=0;m<l.pointers.length;m++){if(p.pointerId==l.pointers[m].id){l.pointers[m].pageX=p.pageX;l.pointers[m].pageY=p.pageY}}n=l.pointers;k=l.pointers.length}else{n=p.touches;k=n.length}if(k>1){if(!l._pinching){l._pinching=true;l._rA=l.rA;l.dStart=l.getDistance(n[0].pageX,n[0].pageY,n[1].pageX,n[1].pageY)}l._centx=(n[0].pageX+n[1].pageX)/2;l._centy=(n[0].pageY+n[1].pageY)/2;l.focusOffX=l._centx-l.$holder.offset().left-(l.sW/2);l.focusOffY=l._centy-l.$holder.offset().top-(l.sH/2);l.changeOffset(true,true);l._wheel=true;l._dragging=false;if(l.zoom_single){l.sRed=300}else{l.dEnd=l.getDistance(n[0].pageX,n[0].pageY,n[1].pageX,n[1].pageY);l.rA=l._rA*(l.dEnd/l.dStart);l.rA=l.rA>l.zoom_max?l.zoom_max:l.rA;l.rA=l.rA<l.rF?l.rF:l.rA}if(l._sc<l.rA){l.cFlag._zo=false;l.cFlag._zi=true}else{l.cFlag._zi=false;l.cFlag._zo=true}if(!l._playing){l.Animate()}}else{l.setDraggedPos(n[0].pageX-l.$holder.offset().left-l.offX,n[0].pageY-l.$holder.offset().top-l.offY,l._sc);l._recent="drag";l._dragging=true;if(!l._playing){l.Animate()}return false}}}},mouseUp:function(l){var k=l.data.self;k.pointers=[];if(k._onButton){k.$holder.find("#"+k.buttons[k.cButtId]._var+"norm").show();k.$holder.find("#"+k.buttons[k.cButtId]._var+"over").hide();if(k.cButtId!==6){k.cFlag[k.buttons[k.cButtId]._var]=false}if(l.type=="touchend"&&k.buttons[k.cButtId].$ob.css("opacity")>0.5){k.buttons[k.cButtId].$ob.css("opacity",0.7)}k._onButton=false;l.stopPropagation();return false}else{if(k._onHitArea){if(!k.hasTouch){e(i).unbind(k.event_move+k.id)}if(k.mouse_drag||k.touch_drag){if(l.type=="mouseup"){if(k.stX==l.pageX&&k.stY==l.pageY){k.samePointRelease=true}k._recent="drag";k._dragging=false;if(!k._playing){k.Animate()}}else{l.preventDefault();k._dragging=false;if(k._pinching){k._pinching=false;k._wheel=false;k.cFlag._nd=true;k.cFlag._zi=false;k.cFlag._zo=false}else{k._recent="drag";if(!k._playing){k.Animate()}}}k._onHitArea=false}}}},mouseWheel:function(l,m){var k=l.data.self;k._onfocus=k._dragging=false;if(k.mouse_wheel_cur){k.focusOffX=l.pageX-k.$holder.offset().left-(k.sW/2);k.focusOffY=l.pageY-k.$holder.offset().top-(k.sH/2);k.changeOffset(true,true)}k._dragging=false;if(m>0){if(k.rA!=k.zoom_max){if(k.zoom_single){if(!k._wheel){k.sRed=300}}else{k.rA*=m<1?1+(0.3*m):1.3;k.rA=k.rA>k.zoom_max?k.zoom_max:k.rA}k._wheel=true;k.cFlag._zi=true;clearTimeout(k.ani_timer);k._playing=true;k.Animate();k.cFlag._zi=false}}else{if(k.rA!=k.rF){if(k.zoom_single){if(!k._wheel){k.sRed=300}}else{k.rA/=m>-1?1+(0.3*-m):1.3;k.rA=k.rA<k.rF?k.rF:k.rA}k._wheel=true;k.cFlag._zo=true;clearTimeout(k.ani_timer);k._playing=true;k.Animate();k.cFlag._zo=false}}return false},autoHide:function(l){var k=l.data.self;clearTimeout(k.auto_timer);k.auto_timer=setTimeout(function(){k.$controls.fadeOut(600)},k.bu_delay);k.$holder.bind("mouseenter.sz",function(m){clearTimeout(k.auto_timer);k.$controls.fadeIn(300)})},correctTransValue:function(){var k=this.$image.css("-moz-transform").toString().replace(")","").split(",");this.transOffX=parseInt(k[4]);this.transOffY=parseInt(k[5])},setDraggedPos:function(m,n,l){var k=this;if(m!==""){k.dX=m+k.transOffX;if(k.pan_limit){k.dX=k.dX+(l*k.iW)<k.sW?k.sW-(l*k.iW):k.dX;k.dX=k.dX>0?0:k.dX;if((l*k.iW)<k.sW){k.dX=(k.sW-(l*k.iW))/2}}else{k.dX=k.dX+(l*k.iW)<k.sW/2?(k.sW/2)-(l*k.iW):k.dX;k.dX=k.dX>k.sW/2?k.sW/2:k.dX}}if(n!==""){k.dY=n+k.transOffY;if(k.pan_limit){k.dY=k.dY+(l*k.iH)<k.sH?k.sH-(l*k.iH):k.dY;k.dY=k.dY>0?0:k.dY;if((l*k.iH)<k.sH){k.dY=(k.sH-(l*k.iH))/2}}else{k.dY=k.dY+(l*k.iH)<k.sH/2?(k.sH/2)-(l*k.iH):k.dY;k.dY=k.dY>k.sH/2?k.sH/2:k.dY}}},Animate:function(){var k=this;var l=0.5;k.cFlag._nd=true;k.ani_end=false;if(k.cFlag._zi){if(!k._wheel&&!k.zoom_single){k.rA*=k.zoom_speed}if(k.rA>k.zoom_max){k.rA=k.zoom_max}k.cFlag._nd=false;k.cFlag._rs=false;k._recent="zoomIn";k._onfocus=k._dragging=false}if(k.cFlag._zo){if(!k._wheel&&!k.zoom_single){k.rA/=k.zoom_speed}if(k.zoom_min!=0){if(k.rA<k.zoom_min){k.rA=k.zoom_min}}else{if(k.rA<k.rF){k.rA=k.rF}}k.cFlag._nd=false;k.cFlag._rs=false;k._recent="zoomOut";k._onfocus=k._dragging=false}if(k.zoom_single&&!k.cFlag._rs){if(k._recent=="zoomIn"){k.sRed+=(10-k.sRed)/6;k.rA+=(k.zoom_max-k.rA)/(((1/(k.pan_speed_o+1))*k.sRed)+1)}else{if(k._recent=="zoomOut"){k.sRed+=(3-k.sRed)/3;k.rA+=(k.rF-k.rA)/(((1/k.pan_speed_o+1)*k.sRed)+1)}}}k.pan_speed=(Math.max(1,1+((k.sW+k.sH)/500))+(k.pan_speed_o*k.pan_speed_o/4))/Math.max(1,k.rA/2);if(k.cFlag._ml){k.oX-=k.pan_speed;k.cFlag._nd=false;k.cFlag._rs=false;k._recent="left";k._onfocus=k._dragging=false}if(k.cFlag._mr){k.oX+=k.pan_speed;k.cFlag._nd=false;k.cFlag._rs=false;k._recent="right";k._onfocus=k._dragging=false}if(k.cFlag._mu){k.oY-=k.pan_speed;k.cFlag._nd=false;k.cFlag._rs=false;k._recent="up";k._onfocus=k._dragging=false}if(k.cFlag._md){k.oY+=k.pan_speed;k.cFlag._nd=false;k.cFlag._rs=false;k._recent="down";k._onfocus=k._dragging=false}if(k.cFlag._rs){k.oX+=(k.fX-k.oX)/8;k.oY+=(k.fY-k.oY)/8;k.cFlag._nd=false;k._recent="reset";k._onfocus=k._dragging=false}if(k.zoom_single&&(k._recent!=="reset")){if(k._onfocus){k._sc+=(k.rA-k._sc)/k.reduction}else{k._sc=k.rA}}else{k._sc+=(k.rA-k._sc)/(k.ani_smooth/(k._onfocus?k.reduction:1))}k._w=k._sc*k.iW;k._h=k._sc*k.iH;if(k._dragging){k.tX=k.dX;k.tY=k.dY;k.changeOffset(true,true)}if(k._recent=="zoomIn"){if(k._w>(k.rA*k.iW)-l&&!k.zoom_single){if(k.cFlag._nd){k.ani_end=true}k._sc=k.rA}else{if(k._w>(k.zoom_max*k.iW)-l&&k.zoom_single){if(k.cFlag._nd){k.ani_end=true}k._sc=k.rA=k.zoom_max}}if(k.ani_end){k._w=k._sc*k.iW;k._h=k._sc*k.iH}}else{if(k._recent=="zoomOut"){if(k._w<(k.rA*k.iW)+l&&!k.zoom_single){if(k.cFlag._nd){k.ani_end=true}k._sc=k.rA}else{if(k._w<(k.rF*k.iW)+l&&k.zoom_single){if(k.cFlag._nd){k.ani_end=true}k._sc=k.rA=k.rF}}if(k.ani_end){k._w=k._sc*k.iW;k._h=k._sc*k.iH}}}k.limitX=(((k._w-k.sW)/(k._w/k.sW))/2);k.limitY=(((k._h-k.sH)/(k._h/k.sH))/2);if(!k._dragging){if(k.pan_limit){if(k.oX<-k.limitX-k.focusOffX){k.oX=-k.limitX-k.focusOffX}if(k.oX>k.limitX-k.focusOffX){k.oX=k.limitX-k.focusOffX}if(k._w<k.sW){k.tX=(k.sW-k._w)/2;k.changeOffset(true,false)}if(k.oY<-k.limitY-k.focusOffY){k.oY=-k.limitY-k.focusOffY}if(k.oY>k.limitY-k.focusOffY){k.oY=k.limitY-k.focusOffY}if(k._h<k.sH){k.tY=(k.sH-k._h)/2;k.changeOffset(false,true)}}else{if(k.oX<-k.limitX-(k.focusOffX/k._w*k.sW)-((k.sW/2)/(k._w/k.sW))){k.oX=-k.limitX-(k.focusOffX/k._w*k.sW)-((k.sW/2)/(k._w/k.sW))}if(k.oX>k.limitX-(k.focusOffX/k._w*k.sW)+((k.sW/2)/(k._w/k.sW))){k.oX=k.limitX-(k.focusOffX/k._w*k.sW)+((k.sW/2)/(k._w/k.sW))}if(k.oY<-k.limitY-(k.focusOffY/k._h*k.sH)-(k.sH/(k._h/k.sH*2))){k.oY=-k.limitY-(k.focusOffY/k._h*k.sH)-(k.sH/(k._h/k.sH*2))}if(k.oY>k.limitY-(k.focusOffY/k._h*k.sH)+(k.sH/(k._h/k.sH*2))){k.oY=k.limitY-(k.focusOffY/k._h*k.sH)+(k.sH/(k._h/k.sH*2))}}}if(!k._dragging&&k._recent!="drag"){k.tX=((k.sW-k._w)/2)+k.focusOffX+(k.oX*(k._w/k.sW));k.tY=((k.sH-k._h)/2)+k.focusOffY+(k.oY*(k._h/k.sH));if(k.ani_smooth===1){k.cFlag._nd=true;k.ani_end=true}}if(k._recent=="zoomIn"||k._recent=="zoomOut"||k.cFlag._rs){k._x=k.tX;k._y=k.tY}else{k._x+=(k.tX-k._x)/(k.ani_smooth/(k._onfocus?k.reduction:1));k._y+=(k.tY-k._y)/(k.ani_smooth/(k._onfocus?k.reduction:1))}if(k._recent=="left"){if(k._x<k.tX+l||k.ani_smooth===1){k.cFlag._nd?k.ani_end=true:"";k._recent="";k._x=k.tX}}else{if(k._recent=="right"){if(k._x>k.tX-l||k.ani_smooth===1){k.cFlag._nd?k.ani_end=true:"";k._recent="";k._x=k.tX}}else{if(k._recent=="up"){if(k._y<k.tY+l||k.ani_smooth===1){k.cFlag._nd?k.ani_end=true:"";k._recent="";k._y=k.tY}}else{if(k._recent=="down"){if(k._y>k.tY-l||k.ani_smooth===1){k.cFlag._nd?k.ani_end=true:"";k._recent="";k._y=k.tY}}else{if(k._recent=="drag"){if(k._x+l>=k.tX&&k._x-l<=k.tX&&k._y+l>=k.tY&&k._y-l<=k.tY||k.ani_smooth===1){if(k._onfocus){k._dragging=false}k.cFlag._nd?k.ani_end=true:"";k._recent="";k._x=k.tX;k._y=k.tY}}}}}}if(k.cFlag._rs&&k._w+l>=(k.rA*k.iW)&&k._w-l<=(k.rA*k.iW)&&k.oX<=k.fX+l&&k.oX>=k.fX-l&&k.oY<=k.fY+l&&k.oY>=k.fY-l){k.ani_end=true;k._recent="";k.cFlag._rs=false;k.cFlag._nd=true;k._x=k.tX;k._y=k.tY;k._sc=k.rA;k._w=k._sc*k.iW;k._h=k._sc*k.iH}if(k.rA==k.rF&&k.iW*k.rA<=k.sW&&k.iH*k.rA<=k.sH){if(k.buttons[1].$ob.css("opacity")>0.5){if(k.rA>=k.rF&&(k.init_zoom==""||k.rA<k.init_zoom)&&(k.zoom_min==""||k.rA<k.zoom_min)){if(k.pan_limit&&k._moveCursor&&!k._moveCursor){k.$image.css("cursor","default");k.$hitArea.css("cursor","default")}for(var m=1;m<(k.pan_limit&&!k._moveCursor?k.buttons_total:2);m++){k.buttons[m].$ob.css({opacity:0.4});k._wheel=false;k.$holder.find("#"+k.buttons[m]._var+"norm").show();k.$holder.find("#"+k.buttons[m]._var+"over").hide()}}}}else{if(k.buttons[1].$ob.css("opacity")<0.5){if(k._moveCursor&&k.mouse_drag){k.$image.css("cursor","move");k.$hitArea.css("cursor","move")}for(var m=1;m<k.buttons_total;m++){k.buttons[m].$ob.css("opacity",0.7)}}}if(k.rA==k.zoom_max){if(k.buttons[0].$ob.css("opacity")>0.5){k.buttons[0].$ob.css("opacity",0.4);k._wheel=false;k.$holder.find("#"+k.buttons[0]._var+"norm").show();k.$holder.find("#"+k.buttons[0]._var+"over").hide()}}else{if(k.buttons[0].$ob.css("opacity")<0.5){k.buttons[0].$ob.css("opacity",0.7)}}if(d){k.$image.css(d,"translate("+k._x.toFixed(14)+"px,"+k._y.toFixed(14)+"px) scale("+k._sc+")")}else{k.$image.css({left:k._x,top:k._y,width:k._w,height:k._h})}if(k.$loc_cont){k.updateLocations(k._x,k._y,k._sc,k.locations)}if(!d&&k.map_coordinates.length>0){k.updateMap()}if(k.ani_end&&!k._dragging&&k._recent!="drag"){k._playing=false;k._recent="";k.cX=(-k._x+(k.sW/2))/k.rA;k.cY=(-k._y+(k.sH/2))/k.rA;if(k.onUPDATE){k.onUPDATE(k.getZoomData(),false)}if(k.onZOOM_PAN){k.onZOOM_PAN(k.getZoomData())}clearTimeout(k.ani_timer)}else{k._playing=true;if(k.onUPDATE){k.onUPDATE(k.getZoomData(),true)}k.ani_timer=setTimeout(function(){k.Animate()},28)}},updateLocations:function(t,s,q,r){if(this.onLANDMARK!==""){if(q>=this.show_at_zoom){if(!this._landmark){this._landmark=true;this.onLANDMARK(true)}}else{if(this._landmark){this._landmark=false;this.onLANDMARK(false)}}}for(var l=0;l<r.length;l++){var m,k,o=(r[l].x*q)+t,n=(r[l].y*q)+s;if(q>=r[l].showAt){if(r[l].scale&&d){m=r[l].w2pad*this._sc;k=r[l].h2*this._sc}else{m=r[l].w2pad;k=r[l].h2}if(o>-m&&o<this.sW+m&&((n>-k&&n<this.sH+k&&r[l].lab)||(n>0&&n<this.sH+(k*2)&&!r[l].lab))){if(!r[l].vis){r[l].vis=true;if(d){r[l].ob.stop().css("display","block").animate({opacity:1},300)}else{r[l].ob.show()}}}else{if(r[l].vis){r[l].vis=false;if(d){r[l].ob.stop().animate({opacity:0},200,function(){e(this).hide()})}else{r[l].ob.hide()}}}}else{if(r[l].vis){r[l].vis=false;if(d){r[l].ob.stop().animate({opacity:0},200,function(){e(this).hide()})}else{r[l].ob.hide()}}}if(o!==r[l].lpx||n!==r[l].lpy&&r[l].vis){if(d){r[l].ob.css(d,"translate("+o.toFixed(14)+"px,"+n.toFixed(14)+"px)"+(r[l].scale?" scale("+this._sc+")":""))}else{r[l].ob.css({left:o,top:n})}}r[l].lpx=o;r[l].lpy=n}},roundBG:function(l,t,r,o,u,k,q,n,p,m){var s=50/2;l.append(e('<div class="bgi'+t+'" style="background-position:'+(-(k-u))+"px "+(-(s-u)-m)+'px"></div>				<div class="bgh'+t+'"></div>				<div class="bgi'+t+'" style="background-position:'+(-k)+"px "+(-(s-u)-m)+"px; left:"+(r-u)+'px"></div>				<div class="bgi'+t+'" style="background-position:'+(-(k-u))+"px "+(-s-m)+"px; top:"+(o-u)+'px"></div>				<div class="bgh'+t+'" style = "top:'+(o-u)+"px; left:"+u+'px"></div>				<div class="bgi'+t+'" style="background-position:'+(-k)+"px "+(-s-m)+"px; top:"+(o-u)+"px; left:"+(r-u)+'px"></div>				<div class="bgc'+t+'"></div>'));e(".bgi"+t).css({position:"absolute",width:u,height:u,"background-image":"url("+n+")","background-repeat":"no-repeat","-ms-filter":"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#00FFFFFF,endColorstr=#00FFFFFF)",zoom:1});e(".bgh"+t).css({position:"absolute",width:r-u*2,height:u,"background-color":q,left:u});e(".bgc"+t).css({position:"absolute",width:r,height:o-u*2,"background-color":q,top:u,left:0})},changeOffset:function(k,l){if(k){this.oX=(this.tX-((this.sW-this._w)/2)-this.focusOffX)/(this._w/this.sW)}if(l){this.oY=(this.tY-((this.sH-this._h)/2)-this.focusOffY)/(this._h/this.sH)}},updateMap:function(){var k=this,l=0;k.mapAreas.each(function(){var m=[];for(var n=0;n<k.map_coordinates[l].length;n++){m[n]=k.map_coordinates[l][n]*k._sc}m=m.join(",");e(this).attr("coords",m);l++})},haltAnimation:function(){clearTimeout(this.ani_timer);this._playing=false;this._recent=""},destroy:function(){var k=this;if(k.assetsLoaded){k.haltAnimation();for(prop in k.orig_style){if(k.orig_style[prop][0]!==false&&k.orig_style[prop][0]!==undefined){if(k.orig_style[prop][0]==="width"||k.orig_style[prop][0]==="height"){if(parseInt(k.orig_style[prop][1])!==0){k.$image.css(k.orig_style[prop][0],k.orig_style[prop][1])}}else{k.$image.css(k.orig_style[prop][0],k.orig_style[prop][1])}}}clearTimeout(k.auto_timer);e(i).unbind(".sz"+k.id);e(f).unbind(".sz"+k.id);k.$holder.unbind(".sz");k.$controls=undefined}else{k.$image.show()}if(k.container==""){if(k.image_url==""){k.$image.insertBefore(k.$holder);if(k.$holder!==undefined){k.$holder.remove()}}else{k.$elem.empty();if(k.$loc_cont[0]){k.$elem.append(k.loc_clone)}}}else{k.$image.insertBefore(k.$holder);k.$holder.empty();k.$image.wrap(k.$holder);if(k.$loc_cont[0]){k.$holder.append(k.loc_clone)}}k.$elem.removeData("smoothZoom");k.$holder=undefined;k.Buttons=undefined;k.op=undefined;k.$image=undefined},focusTo:function(l){var k=this;if(k.assetsLoaded){if(l.zoom===undefined||l.zoom===""||l.zoom==0){l.zoom=k.rA}else{l.zoom/=100}k._onfocus=true;if(l.zoom>k.rA&&k.rA!=k.zoom_max){k.rA=l.zoom;k.rA=k.rA>k.zoom_max?k.zoom_max:k.rA}else{if(l.zoom<k.rA&&k.rA!=k.rF){k.rA=l.zoom;k.rA=k.rA<k.rF?k.rF:k.rA}}k.transOffX=k.transOffY=0;k.setDraggedPos(l.x===undefined||l.x===""?"":(-l.x*k.rA)+(k.sW/2),l.y===undefined||l.y===""?"":(-l.y*k.rA)+(k.sH/2),k.rA);k.reduction=l.speed?l.speed/10:k.focusSpeed;k._recent="drag";k._dragging=true;if(!k._playing){k.Animate()}}},zoomIn:function(k){this.buttons[0].$ob.trigger(this.event_down,{id:0})},zoomOut:function(k){this.buttons[1].$ob.trigger(this.event_down,{id:1})},moveRight:function(k){this.buttons[2].$ob.trigger(this.event_down,{id:2})},moveLeft:function(k){this.buttons[3].$ob.trigger(this.event_down,{id:3})},moveUp:function(k){this.buttons[4].$ob.trigger(this.event_down,{id:4})},moveDown:function(k){this.buttons[5].$ob.trigger(this.event_down,{id:5})},Reset:function(k){this.buttons[6].$ob.trigger(this.event_down,{id:6})},getZoomData:function(k){return{normX:(-this._x/this.rA).toFixed(14),normY:(-this._y/this.rA).toFixed(14),normWidth:this.iW,normHeight:this.iH,scaledX:-this._x.toFixed(14),scaledY:-this._y.toFixed(14),scaledWidth:this._w,scaledHeight:this._h,centerX:(-this._x.toFixed(14)+(this.sW/2))/this.rA,centerY:(-this._y.toFixed(14)+(this.sH/2))/this.rA,ratio:this.rA}},addLandmark:function(n){if(this.$loc_cont){var m=n.length;for(var l=0;l<m;l++){var k=e(n[l]);this.$loc_cont.append(k);this.setLocation(k)}if(m>0){this.updateLocations(this._x,this._y,this._sc,this.locations)}}},attachLandmark:function(m){if(this.$loc_cont){var l=m.length;for(var k=0;k<l;k++){this.setLocation(m[k] instanceof jQuery?m[k]:e("#"+m[k]))}if(l>0){this.updateLocations(this._x,this._y,this._sc,this.locations)}}},removeLandmark:function(n){if(this.$loc_cont){if(n){var m=n.length;for(var l=0;l<m;l++){for(var k=0;k<this.locations.length;k++){if((n[l] instanceof jQuery&&this.locations[k].ob[0]==n[l][0])||(!(n[l] instanceof jQuery)&&this.locations[k].ob.attr("id")==n[l])){this.locations[k].ob.remove();this.locations.splice(k,1);k--}}}}else{if(this.locations.length>0){this.locations[this.locations.length-1].ob.remove();this.locations.pop()}}if(m>0){this.updateLocations(this._x,this._y,this._sc,this.locations)}}},refreshAllLandmarks:function(){var k=this;var n=k.$loc_cont.children(".item");k.show_at_zoom=parseInt(k.$loc_cont.data("show-at-zoom"),10)/100;k.allow_scale=a(k.$loc_cont.data("allow-scale"));k.allow_drag=a(k.$loc_cont.data("allow-drag"));for(var l=0;l<k.locations.length;l++){var m=false;n.each(function(){if(k.locations[l].ob[0]==e(this)[0]){m=true}});if(!m){k.locations.splice(l,1);l--}}n.each(function(){var p=false;for(var o=0;o<k.locations.length;o++){if(k.locations[o].ob[0]==e(this)[0]){p=true;break}}if(!p){k.setLocation(e(this))}});this.updateLocations(this._x,this._y,this._sc,this.locations)},resize:function(m){var k;if(m.data){m.preventDefault();k=m.data.self;var l=k.$holder.parent().width();var n=k.$holder.parent().height();if(k.oW){l=Math.min(l,k.oW)}k.sW=l;if(k.oH){if(k.oW&&k.maintain_ratio){k.sH=l/(k.oW/k.oH)}}else{k.sH=n}}else{k=this;if(m.width){k.sW=m.width}if(m.height){k.sH=m.height}if(m.max_WIDTH){k.w_max=m.max_WIDTH}if(m.max_HEIGHT){k.h_max=m.max_HEIGHT}}if(k.w_max!==0&&k.w_max!==""){k.sW=Math.min(k.sW,k.w_max)}if(k.h_max!==0&&k.h_max!==""){k.sH=Math.min(k.sH,k.h_max)}k.$holder.css({width:k.sW,height:k.sH});if(k.bord_size>0){k.border[0].height(k.sH);k.border[1].css({height:k.sH,left:k.sW-k.bord_size});k.border[2].width(k.sW-(k.bord_size*2));k.border[3].css({width:k.sW-(k.bord_size*2),top:k.sH-k.bord_size})}if(k.bu_align[1]=="center"){k.$controls.css("left",parseInt((k.sW-k.cBW)/2))}if(k.bu_align[0]=="center"){k.$controls.css("top",parseInt((k.sH-k.cBH)/2))}k.rF=k.rR=k.checkRatio(k.sW,k.sH,k.iW,k.iH,k.zoom_fit);if(k.zoom_min==0){if(k.rA<k.rF){k.rA=k.rF}}k.focusTo({x:k.cX,y:k.cY,zoom:"",speed:10})}};e.fn.smoothZoom=function(q){var o=this;var m=o.length;for(var p=0;p<m;p++){var n=e(o[p]);var k=n.data("smoothZoom");if(!k){if(typeof q==="object"||!q){n.data("smoothZoom",new h(n,q))}}else{if(q=="getZoomData"){return k[q].apply(k,Array.prototype.slice.call(arguments,1))}else{if(k[q]){k[q].apply(k,Array.prototype.slice.call(arguments,1))}}}}if(q!=="getZoomData"){return this}};function a(k){if(k===true){return true}else{if(k){k=k.toLowerCase();if(k=="yes"||k=="true"){return true}}}return false}f.Modernizr=function(al,ak,aj){function H(k){ad.cssText=k}function G(l,k){return H(aa.join(l+";")+(k||""))}function W(l,k){return typeof l===k}function U(l,k){return !!~(""+l).indexOf(k)}function S(l,k){for(var n in l){var m=l[n];if(!U(m,"-")&&ad[m]!==aj){return k=="pfx"?m:!0}}return !1}function Q(l,k,o){for(var n in l){var m=k[l[n]];if(m!==aj){return o===!1?l[n]:W(m,"function")?m.bind(o||k):m}}return !1}function O(l,k,o){var n=l.charAt(0).toUpperCase()+l.slice(1),m=(l+" "+Y.join(n+" ")+n).split(" ");return W(k,"string")||W(k,"undefined")?S(m,k):(m=(l+" "+X.join(n+" ")+n).split(" "),Q(m,k,o))}var ai="2.8.2",ah={},ag=ak.documentElement,af="modernizr",ae=ak.createElement(af),ad=ae.style,ac,ab={}.toString,aa=" -webkit- -moz- -o- -ms- ".split(" "),Z="Webkit Moz O ms",Y=Z.split(" "),X=Z.toLowerCase().split(" "),V={},T={},R={},P=[],N=P.slice,M,K=function(y,x,w,v){var u,t,s,r,q=ak.createElement("div"),p=ak.body,o=p||ak.createElement("body");if(parseInt(w,10)){while(w--){s=ak.createElement("div"),s.id=v?v[w]:af+(w+1),q.appendChild(s)}}return u=["&#173;",'<style id="s',af,'">',y,"</style>"].join(""),q.id=af,(p?q:o).innerHTML+=u,o.appendChild(q),p||(o.style.background="",o.style.overflow="hidden",r=ag.style.overflow,ag.style.overflow="hidden",ag.appendChild(o)),t=x(q,y),p?q.parentNode.removeChild(q):(o.parentNode.removeChild(o),ag.style.overflow=r),!!t},J={}.hasOwnProperty,I;!W(J,"undefined")&&!W(J.call,"undefined")?I=function(l,k){return J.call(l,k)}:I=function(l,k){return k in l&&W(l.constructor.prototype[k],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(k){var n=this;if(typeof n!="function"){throw new TypeError}var m=N.call(arguments,1),l=function(){if(this instanceof l){var o=function(){};o.prototype=n.prototype;var q=new o,p=n.apply(q,m.concat(N.call(arguments)));return Object(p)===p?p:q}return n.apply(k,m.concat(N.call(arguments)))};return l}),V.borderradius=function(){return O("borderRadius")},V.csstransforms=function(){return !!O("transform")},V.csstransforms3d=function(){var k=!!O("perspective");return k&&"webkitPerspective" in ag.style&&K("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(l,m){k=l.offsetLeft===9&&l.offsetHeight===3}),k};for(var L in V){I(V,L)&&(M=L.toLowerCase(),ah[M]=V[L](),P.push((ah[M]?"":"no-")+M))}return ah.addTest=function(l,k){if(typeof l=="object"){for(var m in l){I(l,m)&&ah.addTest(m,l[m])}}else{l=l.toLowerCase();if(ah[l]!==aj){return ah}k=typeof k=="function"?k():k,typeof enableClasses!="undefined"&&enableClasses&&(ag.className+=" "+(k?"":"no-")+l),ah[l]=k}return ah},H(""),ae=ac=null,ah._version=ai,ah._prefixes=aa,ah._domPrefixes=X,ah._cssomPrefixes=Y,ah.testProp=function(k){return S([k])},ah.testAllProps=O,ah.testStyles=K,ah.prefixed=function(l,k,m){return k?O(l,k,m):O(l,"pfx")},ah}(this,i);var d=Modernizr.prefixed("transform");var j=Modernizr.prefixed("transformOrigin");var g=Modernizr.prefixed("borderRadius");var b=Modernizr.csstransforms3d})(jQuery,window,document);
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.11
 *
 * Requires: jQuery 1.2.2+
 */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b:b(jQuery)}(function(v){function u(z){var y=z||window.event,x=n.call(arguments,1),w=0,k=0,i=0,f=0,e=0,d=0;if(z=v.event.fix(y),z.type="mousewheel","detail" in y&&(i=-1*y.detail),"wheelDelta" in y&&(i=y.wheelDelta),"wheelDeltaY" in y&&(i=y.wheelDeltaY),"wheelDeltaX" in y&&(k=-1*y.wheelDeltaX),"axis" in y&&y.axis===y.HORIZONTAL_AXIS&&(k=-1*i,i=0),w=0===i?k:i,"deltaY" in y&&(i=-1*y.deltaY,w=i),"deltaX" in y&&(k=y.deltaX,0===i&&(w=-1*k)),0!==i||0!==k){if(1===y.deltaMode){var c=v.data(this,"mousewheel-line-height");w*=c,i*=c,k*=c}else{if(2===y.deltaMode){var a=v.data(this,"mousewheel-page-height");w*=a,i*=a,k*=a}}if(f=Math.max(Math.abs(i),Math.abs(k)),(!q||q>f)&&(q=f,s(y,f)&&(q/=40)),s(y,f)&&(w/=40,k/=40,i/=40),w=Math[w>=1?"floor":"ceil"](w/q),k=Math[k>=1?"floor":"ceil"](k/q),i=Math[i>=1?"floor":"ceil"](i/q),l.settings.normalizeOffset&&this.getBoundingClientRect){var A=this.getBoundingClientRect();e=z.clientX-A.left,d=z.clientY-A.top}return z.deltaX=k,z.deltaY=i,z.deltaFactor=q,z.offsetX=e,z.offsetY=d,z.deltaMode=0,x.unshift(z,w,k,i),r&&clearTimeout(r),r=setTimeout(t,200),(v.event.dispatch||v.event.handle).apply(this,x)}}function t(){q=null}function s(d,c){return l.settings.adjustOldDeltas&&"mousewheel"===d.type&&c%120===0}var r,q,p=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],n=Array.prototype.slice;if(v.event.fixHooks){for(var m=p.length;m;){v.event.fixHooks[p[--m]]=v.event.mouseHooks}}var l=v.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener){for(var a=o.length;a;){this.addEventListener(o[--a],u,!1)}}else{this.onmousewheel=u}v.data(this,"mousewheel-line-height",l.getLineHeight(this)),v.data(this,"mousewheel-page-height",l.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var a=o.length;a;){this.removeEventListener(o[--a],u,!1)}}else{this.onmousewheel=null}v.removeData(this,"mousewheel-line-height"),v.removeData(this,"mousewheel-page-height")},getLineHeight:function(a){var d=v(a)["offsetParent" in v.fn?"offsetParent":"parent"]();return d.length||(d=v("body")),parseInt(d.css("fontSize"),10)},getPageHeight:function(a){return v(a).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};v.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});